<!-- pages/user/user.wxml -->
<view class="userinfo">
  <button class="avatar-btn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
    <van-image
      use-loading-slot
      round
      width="240rpx"
      height="240rpx"
      src="{{avatarUrl?avatarUrl:defaultAvatar}}"
      class="avatar"
      fit="cover"
      slot="loading"
    >
      <van-loading color="#7232dd" slot="loading" type="spinner" size="20" vertical>  
      加载中...
      </van-loading>
    </van-image>
  </button>
  <navigator url='/pages/editUserInfo/editUserInfo?uname={{username}}&avatarUrl={{avatarUrl}}'>
    <view class="right" bind:tap="toEditUserInfo">
      <text class="username">{{username}}</text>
      <van-icon name="edit" size="48rpx"/>
    </view>
  </navigator>
</view>
<view class="btns">
  <van-button color="#7232dd" plain="{{!isShowCourse}}" custom-style="{{btnStyleObj}}" bind:tap="triggle" data-choice="course">课程</van-button>
  <van-button color="#7232dd" plain="{{isShowCourse}}" custom-style="{{btnStyleObj}}" bind:tap="triggle" data-choice="record">记录</van-button>
</view>
<view class="cellList">
  <view class="semesterItem" wx:for="{{semesterAndCourseData}}" wx:key="_id" wx:for-item="semester">
      <view class="semesterName">{{semester.semesterName}}</view>
      <block wx:for="{{semester.courses}}" wx:for-item="course" wx:key="courseId">
        <view class="cell"  bind:tap="showDetail">
          <view class="left">
            <view class="title">{{course.courseName}}</view>
            <view class="label">
              <view class="info">第{{course.lastForWeek.start}}-{{course.lastForWeek.end}}周|{{course.dayOfWeek}}|第{{course.section.start}}-{{course.section.end}}节</view>
              <view class="info">{{course.tname}}|{{course.classroom}}</view>
            </view>
          </view>
          <view class="right" hidden="{{isShowCourse}}">
            <block wx:if="{{role==='student'}}">
              <view class="date-stu">2023/12/11</view>
              <view class="time-stu">20:47:33</view>
              <view class="info-stu">出勤</view>
            </block>
            <block wx:else>
              <view class="date-tea">2023/12/11</view>
              <view class="time-tea">20:47:33</view>
              <view class="info1-tea">出勤：10人</view>
              <view class="info2-tea">缺勤：5人</view>
            </block>
          </view>
          <view class="right" hidden="{{!isShowCourse}}">
            <van-icon name="arrow" />
          </view>
        </view>
      </block>
  </view>
</view>